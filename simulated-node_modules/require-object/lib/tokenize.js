'use strict';

/* Breaks phrases down into words from: camelCase, (Pascal or Title)Case, snake_case, kebab-case, maybe some others. */

module.exports = (string) => {

	if (typeof string !== 'string') throw new TypeError('Arguemnt must be a string with at least one character.')

	// Remove leading and trailing non-word chars
	string = string.replace(/\W/g, ' ').trim();

	let tokens = [];

	// Incomplete token
	let partial = '';

	// Was the last char lower case?
	let lastLowerCase;

	// Add token to tokens array and reset partial
	const push = () => {
		tokens.push(partial.toLowerCase());
		partial = '';
	}

	// Iterate through string, char by char
	string.split('').forEach((c, i) => {

		const charCode = c.charCodeAt(0);

		const lowerCase = charCode >= 97 && charCode <= 122;

		if (/[\W_]/.test(c)) {

			push();

		} else {

			if (lastLowerCase === true && lowerCase === false) push();

			partial += c;

		}

		lastLowerCase = lowerCase;

	});

	tokens.push(partial.toLowerCase());

	return tokens;

}
