'use strict';

module.exports = (string) => {

	if (!string || typeof string !== 'string') throw new Error('Arguemnt must be a string with at least one character.')

	let tokens = [];

	// Incomplete token
	let partial = '';

	// Was the last char lower case?
	let lastLowerCase;

	// Add token to tokens array and reset partial
	const push = () => {
		tokens.push(partial.toLowerCase());
		partial = '';
	}

	// Iterate through string, char by char
	string.split('').forEach((c, i) => {

		const charCode = c.charCodeAt(0);

		const lowerCase = charCode >= 97 && charCode <= 122;

		if (/[\W_]/.test(c)) {

			push();

		} else {

			if (lastLowerCase === true && lowerCase === false) push();

			partial += c;

		}

		lastLowerCase = lowerCase;

	});

	tokens.push(partial.toLowerCase());

	return tokens;

}
